PRO_FILE=SnowStuffForHire.pro

# Source the pro file - should work, unless it gets very complicated
include $(PRO_FILE)

# Construct a list of languages
LANGS=$(shell echo $(TRANSLATIONS) | sed -e 's/SnowStuffForHire_//' -e 's/\.ts//' )

info:
	@echo The following targets are available
	@echo "  update:  Extract strings from source code into .ts files"
	@echo "  release: Compile .ts files into .qm files"
	@echo "  danish:  update, then run linguist on the danish .ts file, then release"
	@echo "  all:     danish, then release"
	@echo "Languages found in project file: $(LANGS)"

SnowStuffForHire_%.ts: $(SOURCES) $(HEADERS) $(FORMS)
	lupdate $(PRO_FILE) -ts $@

SnowStuffForHire_%.qm: SnowStuffForHire_%.ts
	lrelease $@

# This could probably be smarter. Works for now.
danish : SnowStuffForHire_da_DK.ts
	linguist-qt4 SnowStuffForHire_da_DK.ts

all:	danish